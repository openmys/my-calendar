export default {
  title: 'API ë¬¸ì„œ/API ë ˆí¼ëŸ°ìŠ¤',
  parameters: {
    docs: {
      page: () => null,
    },
  },
};

# API ë ˆí¼ëŸ°ìŠ¤

ProseMirror ìŠ¤íƒ€ì¼ í—¤ë“œë¦¬ìŠ¤ ìº˜ë¦°ë” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì „ì²´ API ë¬¸ì„œì…ë‹ˆë‹¤.

## ğŸ“¦ ë©”ì¸ ìµìŠ¤í¬íŠ¸

### createCalendar()

í—¤ë“œë¦¬ìŠ¤ ìº˜ë¦°ë” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```typescript
function createCalendar(options: CalendarOptions): CalendarView

interface CalendarOptions {
  plugins?: Plugin[];
  initialDate?: Date;
  locale?: string;
  timezone?: string;
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```typescript
import { createCalendar, createRangePlugin } from '@openmys/my-calendar';

const calendar = createCalendar({
  plugins: [createRangePlugin()],
  initialDate: new Date(),
  locale: 'ko-KR',
});
```

### useCalendar()

React í™˜ê²½ì—ì„œ í—¤ë“œë¦¬ìŠ¤ ìº˜ë¦°ë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í›…ì…ë‹ˆë‹¤.

```typescript
function useCalendar(options: UseCalendarOptions): UseCalendarReturn

interface UseCalendarOptions {
  plugins: Plugin[];
  initialDate?: Date;
  locale?: string;
}

interface UseCalendarReturn {
  state: CalendarState;
  execCommand: (command: string, ...args: any[]) => boolean;
  decorations: DecorationManager;
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```typescript
import { useCalendar, createRangePlugin } from '@openmys/my-calendar/react';

function MyCalendar() {
  const { state, execCommand, decorations } = useCalendar({
    plugins: [createRangePlugin({ selectionMode: 'range' })]
  });

  return (
    <div>
      {state.days.map(day => (
        <div 
          key={day.date.getTime()}
          onClick={() => execCommand('selectDate', day.date)}
        >
          {day.date.getDate()}
        </div>
      ))}
    </div>
  );
}
```

---

## ğŸ”Œ í”ŒëŸ¬ê·¸ì¸ API

### createRangePlugin()

ë‚ ì§œ ë²”ìœ„ ì„ íƒ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

```typescript
function createRangePlugin(options?: RangeOptions): Plugin<RangeState>

interface RangeOptions {
  selectionMode?: 'single' | 'range' | 'multiple';
  maxRange?: number;
  minRange?: number;
  allowPastDates?: boolean;
  allowFutureDates?: boolean;
}

interface RangeState {
  selectedRange: { start: Date; end: Date } | null;
  isSelecting: boolean;
  selectionStart: Date | null;
  hoveredDate: Date | null;
  selectedDates: Date[];
  options: RangeOptions;
}
```

### createEventPlugin()

ì´ë²¤íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

```typescript
function createEventPlugin(options?: EventOptions): Plugin<EventState>

interface EventOptions {
  allowOverlap?: boolean;
  maxEventsPerDay?: number;
  defaultDuration?: number;
  allowPastEvents?: boolean;
  categories?: string[];
  defaultEventColor?: string;
}

interface CalendarEvent {
  id: string;
  title: string;
  description?: string;
  startDate: Date;
  endDate: Date;
  allDay?: boolean;
  color?: string;
  category?: string;
  metadata?: Record<string, any>;
}
```

---

## ğŸ—ï¸ ì½”ì–´ íƒ€ì…

### CalendarState

ìº˜ë¦°ë”ì˜ ì „ì—­ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

```typescript
interface CalendarState {
  currentDate: Date;
  viewType: 'month' | 'week' | 'day';
  timeRange: TimeRange;
  days: CalendarDay[];
  pluginStates: Map<string, PluginState<any>>;
  timezone: string;
  locale: string;
  isLoading: boolean;
  error: CalendarError | null;
}

interface CalendarDay {
  date: Date;
  isWeekend: boolean;
  isToday: boolean;
  isCurrentMonth: boolean;
  isHoliday?: boolean;
  metadata?: Map<string, any>;
}
```

### Transaction

ìƒíƒœ ë³€ê²½ì„ ìœ„í•œ íŠ¸ëœì­ì…˜ íƒ€ì…ì…ë‹ˆë‹¤.

```typescript
interface Transaction {
  type: string;
  payload: any;
  meta: Map<string, any>;
  timestamp: number;
  source: 'user' | 'plugin' | 'system';
}
```

---

## ğŸ¨ ë°ì½”ë ˆì´ì…˜ ì‹œìŠ¤í…œ

### DecorationSet

UI ë Œë”ë§ì„ ìœ„í•œ ë°ì½”ë ˆì´ì…˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

```typescript
class DecorationSet {
  decorations: Decoration[];
  
  add(decoration: Decoration): DecorationSet;
  remove(predicate: (decoration: Decoration) => boolean): DecorationSet;
  find(predicate: (decoration: Decoration) => boolean): Decoration[];
  getDecorationsForDate(date: Date): Decoration[];
}

interface Decoration {
  type: 'class' | 'style' | 'widget' | 'attribute';
  from: Date;
  to?: Date;
  spec: any;
  inclusive: boolean;
}
```

---

## ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### CalendarUtils

ìº˜ë¦°ë” ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì…ë‹ˆë‹¤.

```typescript
class CalendarUtils {
  static getClassNameFromDecorations(decorations: Decoration[]): string;
  static getStyleFromDecorations(decorations: Decoration[]): CSSProperties;
  static generateDaysForMonth(year: number, month: number): CalendarDay[];
  static isDateInRange(date: Date, start: Date, end: Date): boolean;
  static formatDate(date: Date, format: string, locale?: string): string;
  static addDays(date: Date, days: number): Date;
  static isSameDay(date1: Date, date2: Date): boolean;
  static isSameMonth(date1: Date, date2: Date): boolean;
}
```

---

## ğŸ“˜ ì‚¬ìš© ê°€ì´ë“œ

### ê¸°ë³¸ ì‚¬ìš©ë²•

```typescript
import { useCalendar, createRangePlugin } from '@openmys/my-calendar/react';

function BasicCalendar() {
  const { state, execCommand } = useCalendar({
    plugins: [createRangePlugin()]
  });

  return (
    <div className="calendar">
      {state.days.map(day => (
        <button
          key={day.date.getTime()}
          onClick={() => execCommand('selectDate', day.date)}
        >
          {day.date.getDate()}
        </button>
      ))}
    </div>
  );
}
```

### ê³ ê¸‰ ì‚¬ìš©ë²• (í—¤ë“œë¦¬ìŠ¤ íŒ¨í„´)

```typescript
import { useCalendar, createRangePlugin, createEventPlugin } from '@openmys/my-calendar/react';

function AdvancedCalendar() {
  const { state, execCommand, decorations } = useCalendar({
    plugins: [
      createRangePlugin({ selectionMode: 'range', maxRange: 14 }),
      createEventPlugin({ allowOverlap: false })
    ]
  });

  return (
    <div className="advanced-calendar">
      <header>
        <button onClick={() => execCommand('goToPreviousMonth')}>
          Previous
        </button>
        <h2>{state.currentDate.toLocaleDateString()}</h2>
        <button onClick={() => execCommand('goToNextMonth')}>
          Next
        </button>
      </header>
      
      <div className="calendar-grid">
        {state.days.map(day => {
          const dayDecorations = decorations.getDecorationsForDate(day.date);
          
          return (
            <div
              key={day.date.getTime()}
              className={`day ${CalendarUtils.getClassNameFromDecorations(dayDecorations)}`}
              style={CalendarUtils.getStyleFromDecorations(dayDecorations)}
              onClick={() => execCommand('selectDate', day.date)}
            >
              {day.date.getDate()}
            </div>
          );
        })}
      </div>
    </div>
  );
}
```

---

## ğŸ” ë” ë§ì€ ì •ë³´

- **ë¼ì´ë¸Œ ì˜ˆì‹œ**: ì‹¤ì œ ë™ì‘í•˜ëŠ” ìº˜ë¦°ë” ì»´í¬ë„ŒíŠ¸ë“¤
- **í”ŒëŸ¬ê·¸ì¸ ë°ëª¨**: ê° í”ŒëŸ¬ê·¸ì¸ì˜ ìƒì„¸í•œ ì‚¬ìš©ë²•  
- **í—¤ë“œë¦¬ìŠ¤ ì˜ˆì‹œ**: ë‹¤ì–‘í•œ ì»¤ìŠ¤í…€ UI êµ¬í˜„ ë°©ë²•
- **GitHub ì €ì¥ì†Œ**: ì†ŒìŠ¤ ì½”ë“œ ë° ì´ìŠˆ íŠ¸ë˜í‚¹

**TypeScript ì§€ì›**: ëª¨ë“  APIëŠ” ì™„ì „í•œ TypeScript íƒ€ì… ì •ì˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
**Tree Shaking**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ì€ ìë™ìœ¼ë¡œ ë²ˆë“¤ì—ì„œ ì œì™¸ë©ë‹ˆë‹¤.  
**SSR ì§€ì›**: ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì„ ì™„ì „ ì§€ì›í•©ë‹ˆë‹¤.